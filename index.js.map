{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const apiKey = '45704413-78352b289562c0261d4e7c072';\nconst baseUrl = 'https://pixabay.com/api/';\n\n// Функція для отримання даних з API Pixabay\nexport function getGalleryData(queryValue) {\n  // Створюємо параметри запиту\n  const searchParams = new URLSearchParams({\n    key: apiKey,              // Без підкреслення\n    q: queryValue,            // Пошуковий запит\n    image_type: 'photo',      // Тип зображення\n    orientation: 'horizontal',// Орієнтація\n    safesearch: 'true',       // Безпечний пошук\n  });\n\n  // Виконуємо запит до API і повертаємо результат\n  return fetch(`${baseUrl}?${searchParams}`)\n    .then(response => {\n      // Перевіряємо, чи запит успішний (код 200)\n      if (!response.ok) {\n        // Якщо запит не успішний, кидаємо помилку\n        throw new Error(response.status);\n      }\n      // Повертаємо дані у форматі JSON\n      return response.json();\n    });\n}\n\n","// Функція для додавання лоадера на інтерфейс\nexport function addLoader(gallery) {\n  // лоадер\n  const loaderHTML = '<span class=\"loader\"></span>';\n  \n  //лоадер перед галереєю\n  gallery.insertAdjacentHTML('beforebegin', loaderHTML);\n}\n\n// Функція для видалення лоадера з інтерфейсу\nexport function removeLoader() {\n  // Знаходимо елемент лоадера\n  const loader = document.querySelector('.loader');\n  \n  // Якщо лоадер знайдено, видаляємо його з DOM\n  if (loader) {\n    loader.remove();\n  }\n}\n\n// Функція для створення розмітки галереї\nexport function markup(data) {\n  // Створюємо HTML-розмітку для кожного зображення\n  return data.hits\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <li class=\"gallery-item hvr-grow\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                  class=\"gallery-image\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  loading=\"lazy\"\n              /></a>\n              <ul class=\"img-content-wrapper\">\n                <li class=\"img-content-descr\">Likes<span>${likes}</span></li>\n                <li class=\"img-content-descr\">Views<span>${views}</span></li>\n                <li class=\"img-content-descr\">Comments<span>${comments}</span></li>\n                <li class=\"img-content-descr\">Downloads<span>${downloads}</span></li>\n              </ul>\n            </li>\n      `\n    )\n    .join(''); // Перетворюємо масив у строку HTML\n}\n\n","\nimport { getGalleryData } from './js/pixabay-api';\n\n\nimport { addLoader, removeLoader, markup } from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css'; // Імпорт стилів для SimpleLightbox\n\n// Отримуємо форму пошуку\nconst form = document.querySelector('.search-form');\n\n// Отримуємо контейнер для галереї\nconst gallery = document.querySelector('.gallery');\n\n// Ініціалізуємо SimpleLightbox для галереї\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', onSubmitForm);\n\nfunction onSubmitForm(event) {\n  event.preventDefault();\n\n  // отримання даних з форми\n  const formData = new FormData(event.target);\n\n  // Преобразовуємо FormData у звичайний об'єкт і отримуємо поле пошуку\n  const { searchQuery } = Object.fromEntries(formData.entries());\n\n  // Обрізаємо зайві пробіли на початку та в кінці введеного значення\n  const searchValue = searchQuery.trim();\n\n  // Якщо значення пошуку порожнє, показуємо помилку і виходимо з функції\n  if (!searchValue) {\n    iziToast.error({\n      title: 'Error',\n      message: 'The search query is empty.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  // Додаємо анімацію лоадера до інтерфейсу\n  addLoader(gallery);\n\n  getGalleryData(searchValue)\n    .then(data => {\n      // Очищаємо галерею перед додаванням нових елементів\n      gallery.innerHTML = '';\n\n      // Якщо за запитом не знайдено зображень, показуємо відповідне сповіщення\n      if (data.hits.length === 0) {\n        iziToast.info({\n          position: 'topRight',\n          title: 'Info',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n\n      // Створюємо HTML-розмітку для галереї на основі отриманих даних\n      const galleryMarkup = markup(data);\n\n      // Додаємо створену розмітку до контейнера галереї\n      gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n\n      // Оновлюємо SimpleLightbox після додавання нових елементів\n      lightbox.refresh();\n    })\n    .catch(error => {\n      // Якщо виникла помилка, показуємо сповіщення з описом помилки\n      console.error('Помилка:', error);\n      iziToast.error({\n        title: 'Error',\n        message: `Error: ${error.message}`,\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      // Видаляємо лоадер після завершення запиту\n      removeLoader();\n    });\n}\n"],"names":["apiKey","baseUrl","getGalleryData","queryValue","searchParams","response","addLoader","gallery","removeLoader","loader","markup","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","lightbox","SimpleLightbox","onSubmitForm","event","formData","searchQuery","searchValue","iziToast","galleryMarkup","error"],"mappings":"wvBAAA,MAAMA,EAAS,qCACTC,EAAU,2BAGT,SAASC,EAAeC,EAAY,CAEzC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAGD,OAAO,MAAM,GAAGF,CAAO,IAAIG,CAAY,EAAE,EACtC,KAAKC,GAAY,CAEhB,GAAI,CAACA,EAAS,GAEZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MACtB,CAAK,CACL,CCxBO,SAASC,EAAUC,EAAS,CAKjCA,EAAQ,mBAAmB,cAHR,8BAGiC,CACtD,CAGO,SAASC,GAAe,CAE7B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAG3CA,GACFA,EAAO,OAAM,CAEjB,CAGO,SAASC,EAAOC,EAAM,CAE3B,OAAOA,EAAK,KACT,IACC,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,8CAEtCL,CAAa;AAAA;AAAA;AAAA,yBAGlCD,CAAY;AAAA,yBACZE,CAAI;AAAA;AAAA;AAAA;AAAA,2DAI8BC,CAAK;AAAA,2DACLC,CAAK;AAAA,8DACFC,CAAQ;AAAA,+DACPC,CAAS;AAAA;AAAA;AAAA,OAInE,EACA,KAAK,EAAE,CACZ,CC9BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAG5CZ,EAAU,SAAS,cAAc,UAAU,EAGjD,IAAIa,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAGpB,MAAMC,EAAW,IAAI,SAASD,EAAM,MAAM,EAGpC,CAAE,YAAAE,CAAW,EAAK,OAAO,YAAYD,EAAS,QAAO,CAAE,EAGvDE,EAAcD,EAAY,OAGhC,GAAI,CAACC,EAAa,CAChBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACT,SAAU,UAChB,CAAK,EACD,MACD,CAGDrB,EAAUC,CAAO,EAEjBL,EAAewB,CAAW,EACvB,KAAKf,GAAQ,CAKZ,GAHAJ,EAAQ,UAAY,GAGhBI,EAAK,KAAK,SAAW,EAAG,CAC1BgB,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,OACP,QAAS,0EACnB,CAAS,EACD,MACD,CAGD,MAAMC,EAAgBlB,EAAOC,CAAI,EAGjCJ,EAAQ,mBAAmB,YAAaqB,CAAa,EAGrDR,EAAS,QAAO,CACtB,CAAK,EACA,MAAMS,GAAS,CAEd,QAAQ,MAAM,WAAYA,CAAK,EAC/BF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,UAAUE,EAAM,OAAO,GAChC,SAAU,UAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CAEbrB,GACN,CAAK,CACL"}